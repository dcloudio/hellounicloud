(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["node-modules/@dcloudio/uni-cli-shared/components/unicloud-db"],{"0d16":function(t,e,n){"use strict";var a;n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return a}));var i=function(){var t=this,e=t.$createElement;t._self._c},o=[]},"848e":function(t,e,n){"use strict";n.r(e);var a=n("c693"),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},"960d":function(t,e,n){"use strict";n.r(e);var a=n("0d16"),i=n("848e");for(var o in i)"default"!==o&&function(t){n.d(e,t,(function(){return i[t]}))}(o);var r,c=n("f0c5"),l=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],r);e["default"]=l.exports},c693:function(t,e,n){"use strict";(function(t,n){function a(t){return c(t)||r(t)||o(t)||i()}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function o(t,e){if(t){if("string"===typeof t)return l(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?l(t,e):void 0}}function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function c(t){if(Array.isArray(t))return l(t)}function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={load:"load",error:"error"},u={add:"add",replace:"replace"},d=["pageCurrent","pageSize","collection","action","field","getcount","orderby","where"],f={name:"UniClouddb",props:{options:{type:[Object,Array],default:function(){return{}}},collection:{type:String,default:""},action:{type:String,default:""},field:{type:String,default:""},orderby:{type:String,default:""},where:{type:[String,Object],default:""},pageData:{type:String,default:"add"},pageCurrent:{type:Number,default:1},pageSize:{type:Number,default:20},getcount:{type:[Boolean,String],default:!1},getone:{type:[Boolean,String],default:!1},gettree:{type:[Boolean,String],default:!1},startwith:{type:String,default:""},limitlevel:{type:Number,default:10},manual:{type:Boolean,default:!1}},data:function(){return{loading:!1,hasMore:!1,dataList:this.getone?void 0:[],paginationInternal:{current:this.pageCurrent,size:this.pageSize,count:0},errorMessage:""}},created:function(){var t=this;this._isEnded=!1,this.$watch((function(){var e=[];return d.forEach((function(n){e.push(t[n])})),e}),(function(e,n){t.paginationInternal.size=t.pageSize;for(var a=!1,i=2;i<e.length;i++)if(e[i]!==n[i]){a=!0;break}a&&(t.clear(),t.reset()),e[0]!==n[0]&&(t.paginationInternal.current=t.pageCurrent),t._execLoadData()})),this.manual||this.loadData()},methods:{loadData:function(t,e){var n=null;"object"===typeof t?(t.clear&&(this.clear(),this.reset()),void 0!==t.current&&(this.paginationInternal.current=t.current),"function"===typeof e&&(n=e)):"function"===typeof t&&(n=t),this._execLoadData(n)},loadMore:function(){this._isEnded||this._execLoadData()},refresh:function(){this.clear(),this._execLoadData()},clear:function(){this._isEnded=!1,this.dataList=[]},reset:function(){this.paginationInternal.current=1},add:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.toastTitle,o=a.success,r=a.fail,c=a.complete;t.showLoading();var l=n.database();l.collection(this.collection).add(e).then((function(e){o&&o(e),t.showToast({title:i||"新增成功"})})).catch((function(e){r&&r(e),t.showModal({content:e.message,showCancel:!1})})).finally((function(){t.hideLoading(),c&&c()}))},remove:function(e){var n=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=a.action,o=a.success,r=a.fail,c=a.complete,l=a.confirmTitle,s=a.confirmContent;e&&e.length&&t.showModal({title:l||"提示",content:s||"是否删除该数据",showCancel:!0,success:function(t){t.confirm&&n._execRemove(e,i,o,r,c)}})},update:function(e,a){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.toastTitle,r=i.success,c=i.fail,l=i.complete;t.showLoading();var s=n.database();return s.collection(this.collection).doc(e).update(a).then((function(e){r&&r(e),t.showToast({title:o||"修改成功"})})).catch((function(e){c&&c(e),t.showModal({content:e.message,showCancel:!1})})).finally((function(){t.hideLoading(),l&&l()}))},_execLoadData:function(t){var e=this;this.loading||(this.loading=!0,this.errorMessage="",this._getExec().then((function(n){e.loading=!1;var i=n.result,o=i.data,r=i.count;e._isEnded=o.length<e.pageSize,e.hasMore=!e._isEnded;var c,l=e.getone?o.length?o[0]:void 0:o;(t&&t(l,e._isEnded),e._dispatchEvent(s.load,l),e.getone||e.pageData===u.replace)?e.dataList=l:((c=e.dataList).push.apply(c,a(l)),e.dataList.length&&e.paginationInternal.current++);e.getcount&&(e.paginationInternal.count=r)})).catch((function(n){e.loading=!1,e.errorMessage=n,t&&t(),e.$emit(s.error,n)})))},_getExec:function(){var t=n.database();this.action&&(t=t.action(this.action)),t=t.collection(this.collection),this.where&&Object.keys(this.where).length&&(t=t.where(this.where)),this.field&&(t=t.field(this.field)),this.orderby&&(t=t.orderBy(this.orderby));var e=this.paginationInternal,a=e.current,i=e.size,o={};return this.getcount&&(o.getCount=this.getcount),this.gettree&&(o.getTree={limitLevel:this.limitlevel,startWith:this.startwith}),t=t.skip(i*(a-1)).limit(i).get(o),t},_execRemove:function(e,a,i,o,r){var c=this;if(this.collection&&e){var l=Array.isArray(e)?e:[e];if(l.length){t.showLoading({mask:!0});var s=n.database(),d=s.command,f=s;a&&(f=f.action(a)),f.collection(this.collection).where({_id:d.in(l)}).remove().then((function(t){i&&i(t.result),c.pageData===u.replace?c.refresh():c.removeData(l)})).catch((function(e){o&&o(e),t.showModal({content:e.message,showCancel:!1})})).finally((function(){t.hideLoading(),r&&r()}))}}},removeData:function(t){for(var e=t.slice(0),n=this.dataList,a=n.length-1;a>=0;a--){var i=e.indexOf(n[a]._id);i>=0&&(n.splice(a,1),e.splice(i,1))}},_dispatchEvent:function(t,e){this._changeDataFunction?this._changeDataFunction(e,this._isEnded):this.$emit(t,e,this._isEnded)}}};e.default=f}).call(this,n("543d")["default"],n("a9ff")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'node-modules/@dcloudio/uni-cli-shared/components/unicloud-db-create-component',
    {
        'node-modules/@dcloudio/uni-cli-shared/components/unicloud-db-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("960d"))
        })
    },
    [['node-modules/@dcloudio/uni-cli-shared/components/unicloud-db-create-component']]
]);
