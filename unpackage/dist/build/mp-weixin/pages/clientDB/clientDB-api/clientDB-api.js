(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/clientDB/clientDB-api/clientDB-api"],{"1a91":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return o}));var o={alertCode:function(){return n.e("components/alertCode/alertCode").then(n.bind(null,"0afb"))},uniSection:function(){return n.e("components/uni-section/uni-section").then(n.bind(null,"a95d"))},uniNumberBox:function(){return n.e("components/uni-number-box/uni-number-box").then(n.bind(null,"e9ca"))}},a=function(){var e=this,t=e.$createElement;e._self._c;e._isMounted||(e.e0=function(t){t/1>0&&(e.pageSize=t/1)},e.e1=function(t){t/1>0&&(e.pageCurrent=t/1)})},i=[]},"62d1":function(e,t,n){"use strict";n.r(t);var o=n("843d"),a=n.n(o);for(var i in o)"default"!==i&&function(e){n.d(t,e,(function(){return o[e]}))}(i);t["default"]=a.a},"677f":function(e,t,n){"use strict";(function(e){n("ef00");o(n("66fd"));var t=o(n("b3a5"));function o(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,n("543d")["createPage"])},"843d":function(e,t,n){"use strict";(function(e,o){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i(n("a34a"));function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,o,a,i,r){try{var c=e[i](r),u=c.value}catch(s){return void n(s)}c.done?t(u):Promise.resolve(u).then(o,a)}function c(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function c(e){r(i,o,a,c,u,"next",e)}function u(e){r(i,o,a,c,u,"throw",e)}c(void 0)}))}}var u=e.database(),s={data:function(){return{msg:{result:{data:""}},pageSize:1,pageCurrent:2}},methods:{addMoreData2TestDb:function(){var e=this;o.showLoading({mask:!1});for(var t=[],n=0;n<5;n++)t.push({data:Math.ceil(999*Math.random())});u.collection("test").add(t).then((function(t){e.$refs.alertCode.open(t.result),o.hideLoading()}))},addData2TestDb:function(){var e=this;o.showLoading({mask:!1}),u.collection("test").add({data:Date.now()}).then((function(t){e.$refs.alertCode.open(t.result),o.hideLoading()}))},updateData2TestDb:function(){var e=this;o.showLoading({mask:!1});var t=u.collection("test");t.get({getOne:!0}).then((function(n){var a=n.result.data;a?t.doc(a._id).update({data:Date.now()}).then((function(t){console.log(t),e.$refs.alertCode.open(t.result),o.hideLoading()})):(o.showToast({title:"test表内没有数据",icon:"none"}),o.hideLoading())}))},removeData2TestDb:function(){var e=this;o.showLoading({mask:!1});var t=u.collection("test");t.get({getOne:!0}).then((function(n){var a=n.result.data;a?t.doc(a._id).remove().then((function(t){console.log(t),e.$refs.alertCode.open(t.result),o.hideLoading()})):(o.showToast({title:"test表内没有数据",icon:"none"}),o.hideLoading())}))},removeAllData2TestDb:function(){return c(a.default.mark((function e(){var t,n,i,r,c;return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return 1,o.showLoading({mask:!1}),t=u.collection("test"),e.next=5,t.get();case 5:if(n=e.sent,i=n.result.data,console.log(i),!i.length){e.next=16;break}return e.next=11,t.where('data!="不存在的条件"').remove();case 11:r=e.sent,c=r.result.deleted,o.showToast({title:"成功删除"+c+"条数据！",icon:"none"}),e.next=18;break;case 16:o.showToast({title:"test表内没有数据",icon:"none"}),o.hideLoading();case 18:case"end":return e.stop()}}),e)})))()},getData:function(e){var t=this;o.showLoading({mask:!0}),u.collection(e).get().then((function(e){t.$refs.alertCode.open(e.result)})).catch((function(e){console.error(e)})).finally((function(){o.hideLoading()}))},getOrder:function(){var e=this;o.showLoading({mask:!0}),u.collection("order,book").field("book_id{title,author},quantity").get().then((function(t){e.$refs.alertCode.open(t.result)})).catch((function(e){console.error(e)})).finally((function(){o.hideLoading()}))},getOneBook:function(){var e=this;o.showLoading({mask:!0}),u.collection("book").get({getOne:!0}).then((function(t){e.$refs.alertCode.open(t.result)})).catch((function(e){console.error(e)})).finally((function(){o.hideLoading()}))},getBookTitle:function(){var e=this;o.showLoading({mask:!0}),u.collection("book").field("title").get().then((function(t){e.$refs.alertCode.open(t.result)})).catch((function(e){console.error(e)})).finally((function(){o.hideLoading()}))},getBookAs:function(){var e=this;o.showLoading({mask:!0}),u.collection("book").field("title,author as book_author").get().then((function(t){e.$refs.alertCode.open(t.result)})).catch((function(e){console.error(e)})).finally((function(){o.hideLoading()}))},getOrderOrderBy:function(e){var t=this;o.showLoading({mask:!0}),u.collection("order").orderBy(e).get().then((function(e){t.$refs.alertCode.open(e.result)})).catch((function(e){console.error(e)})).finally((function(){o.hideLoading()}))},getBookHasCount:function(){var e=this;o.showLoading({mask:!0}),u.collection("book").get({getCount:!0}).then((function(t){e.$refs.alertCode.open(t.result)})).catch((function(e){console.error(e)})).finally((function(){o.hideLoading()}))},getTreeFn:function(){var e=this;o.showLoading({mask:!0}),u.collection("department").get({getTree:{limitLevel:10}}).then((function(t){var n=t.result.data;console.log("resdata"),e.$refs.alertCode.open(n)})).catch((function(e){o.showModal({content:e.message||"请求服务失败",showCancel:!1})})).finally((function(){o.hideLoading()}))},getPageData:function(){var e=this;return c(a.default.mark((function t(){var n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o.showLoading({mask:!1}),t.next=3,u.collection("book").skip((e.pageSize-1)*e.pageCurrent).limit(e.pageCurrent).get();case 3:n=t.sent,console.log(n),e.$refs.alertCode.open(n.result.data),o.hideLoading();case 7:case"end":return t.stop()}}),t)})))()}}};t.default=s}).call(this,n("a9ff")["default"],n("543d")["default"])},a38f:function(e,t,n){"use strict";var o=n("e7f3"),a=n.n(o);a.a},b3a5:function(e,t,n){"use strict";n.r(t);var o=n("1a91"),a=n("62d1");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("a38f");var r,c=n("f0c5"),u=Object(c["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);t["default"]=u.exports},e7f3:function(e,t,n){}},[["677f","common/runtime","common/vendor"]]]);